<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>bambi</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="bambi_files/libs/clipboard/clipboard.min.js"></script>
<script src="bambi_files/libs/quarto-html/quarto.js"></script>
<script src="bambi_files/libs/quarto-html/popper.min.js"></script>
<script src="bambi_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="bambi_files/libs/quarto-html/anchor.min.js"></script>
<link href="bambi_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="bambi_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="bambi_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="bambi_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="bambi_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script src="https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js" crossorigin="anonymous"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Executive Summary</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Problem: Evaluating NFL kickers accurately mid-season presents a significant challenge due to the inherent sparsity of game data and the varying contexts of individual field goal attempts. Traditional metrics often struggle to provide insights into true player skill when sample sizes are limited.</p>
<p>Solution: This report proposes a Bayesian hierarchical model designed to evaluate of NFL kickers. The model accounts for both individual player skill and the non-linear relationship between kick distance and success probability. By estimating unique player effects and then applying these predictions to a standardized set of simulated kicks (25-60 yards), we derive a contextualized and stable evaluation metric.</p>
<p>Key Findings: The Simulated Field Goal Over Expected (FGOE) metric, generated by this model, offers a superior and more reliable assessment of kicker performance compared to traditional observed metrics. This approach successfully mitigates the noise introduced by small sample sizes, enabling more confident comparisons across players. For example, our analysis demonstrates how the Simulated FGOE accurately positions elite kickers like Justin Tucker at the top, even when their regular FGOE is skewed by anomalies (e.g., blocked kicks).</p>
<p>Impact: This model provides a quantifiable and nuanced understanding of kicker performance. It not only offers a clear “rating” but also quantifies the uncertainty surrounding each player’s estimated skill through credible intervals. This allows decision-makers to distinguish between genuinely high-performing kickers and those whose performance might be inflated by favorable circumstances or limited data. Players with fewer historical kicks will naturally exhibit larger uncertainty bands, providing a realistic view of the confidence in their evaluation, while consistently strong performers will show tighter, higher-valued estimates. This data-driven insight empowers scouting teams and analysts to make more informed personnel decisions.</p>
<section id="contents" class="level2">
<h2 class="anchored" data-anchor-id="contents">Contents</h2>
<ul>
<li><a href="#model-setup">Model Setup</a></li>
<li><a href="#regular-fgoe">Regular FGOE</a></li>
<li><a href="#simulated-fgoe">Simulated FGOE</a></li>
<li><a href="#leaderboard">Leaderboard</a></li>
</ul>
<p>Assumptions:</p>
<ul>
<li>This represents the initial request. The focus is to start with an effective but simple approach, then build iteratively with support from scouting teams and other functional areas within the organization.</li>
<li>Explainability is prioritized.</li>
</ul>
<p>Library imports</p>
<div class="cell" data-execution_count="1">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> bambi <span class="im">as</span> bmb</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> arviz <span class="im">as</span> az</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> bambi <span class="im">as</span> bmb</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># functions for data wrangling and plotting</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> utils <span class="im">import</span> (</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    create_grid,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    create_leaderboard,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    plot_fgoe,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    prep_data,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> great_tables <span class="im">import</span> GT, md, html</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data">Data</h3>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> prep_data()</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df_model_pd <span class="op">=</span> df.<span class="bu">filter</span>(pl.col(<span class="st">'season_type'</span>) <span class="op">==</span> <span class="st">'Reg'</span>).to_pandas()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>df.glimpse()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 10866
Columns: 13
$ season            &lt;i64&gt; 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010, 2010
$ season_type       &lt;cat&gt; Pre, Pre, Pre, Pre, Pre, Pre, Pre, Pre, Pre, Pre
$ week              &lt;i64&gt; 1, 1, 1, 1, 2, 2, 2, 2, 2, 2
$ game_date         &lt;str&gt; '8/8/2010', '8/8/2010', '8/8/2010', '8/8/2010', '8/12/2010', '8/12/2010', '8/12/2010', '8/12/2010', '8/12/2010', '8/12/2010'
$ game_key          &lt;i64&gt; 55073, 55073, 55073, 55073, 55076, 55074, 55075, 55074, 55076, 55074
$ play_id           &lt;i64&gt; 433, 2661, 2772, 1604, 3086, 1496, 3689, 4032, 2082, 2038
$ play_sequence     &lt;i64&gt; 17, 104, 109, 64, 123, 61, 152, 162, 81, 83
$ player_id         &lt;cat&gt; 34623, 34623, 34623, 34623, 34623, 10114, 33337, 10114, 34623, 26127
$ field_goal_result &lt;str&gt; 'Made', 'Missed', 'Made', 'Made', 'Made', 'Made', 'Made', 'Made', 'Made', 'Missed'
$ distance          &lt;i64&gt; 20, 49, 23, 34, 28, 37, 23, 45, 27, 50
$ player_name       &lt;cat&gt; DAVID BUEHLER, DAVID BUEHLER, DAVID BUEHLER, DAVID BUEHLER, DAVID BUEHLER, JOHN KASAY, GARRETT HARTLEY, JOHN KASAY, DAVID BUEHLER, SHAYNE GRAHAM
$ birthdate         &lt;str&gt; '2/5/1987', '2/5/1987', '2/5/1987', '2/5/1987', '2/5/1987', '10/27/1969', '5/16/1986', '10/27/1969', '2/5/1987', '12/9/1977'
$ success           &lt;i32&gt; 1, 0, 1, 1, 1, 1, 1, 1, 1, 0
</code></pre>
</div>
</div>
<p>Given the dataset, <code>attempt_yards</code> is one of the most valuable features. Additional useful variables could include seasonal effects, player age, and regular versus preseason distinctions. Players have varying skill levels that traditional analytics cannot fully capture. The sparse data and hierarchical structure of the underlying process make this well-suited for hierarchical modeling approaches.</p>
</section>
<section id="model-setup" class="level3">
<h3 class="anchored" data-anchor-id="model-setup">Model Setup</h3>
<p>The following model was used:</p>
<span class="math display">\[\begin{aligned}
y_i &amp;\sim \operatorname{Bernoulli}(p_i) \\
\operatorname{logit}(p_i) &amp;= \alpha_{j[i]} + \sum_{k=1}^K B_k(x_i) \, \beta_k \\
\\
\alpha_j &amp;\sim \operatorname{Student-t}(3, 0, \sigma_\alpha) \\
\sigma_\alpha &amp;\sim \operatorname{HalfNormal}(0.5) \\
\\
\beta_k &amp;\sim \operatorname{Student-t}(3, 0, 0.5) \quad \text{for } k = 1, \dots, K \\
\\
\mu_\text{global} &amp;\sim \mathcal{N}(0, 1.5)
\end{aligned}\]</span>
<p>More detail follows below, but the high-level overview includes:</p>
<ul>
<li>Bernoulli likelihood for the binary outcome</li>
<li>Partially pooled intercepts by player</li>
<li>The distribution of player effects share the same sigma parameter</li>
<li>Spline with basis functions applied to distance</li>
</ul>
<p>Student-t priors were chosen for their heavier tails, providing more robust estimates to handle outliers or less certain prior knowledge, particularly for individual player effects.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># spline specification, miss you mgcv::s()</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> <span class="st">"bs(distance, df=4, intercept=False)"</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>priors <span class="op">=</span> {</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># priors on spline</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    s: bmb.Prior(<span class="st">"StudentT"</span>, nu<span class="op">=</span><span class="dv">3</span>, mu<span class="op">=</span><span class="dv">0</span>, sigma<span class="op">=</span><span class="fl">1.5</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># prior for player componenent, shared sigma parameter</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"1|player_id"</span>: bmb.Prior(</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"StudentT"</span>, nu<span class="op">=</span><span class="dv">3</span>, mu<span class="op">=</span><span class="dv">0</span>, sigma<span class="op">=</span>bmb.Prior(<span class="st">"HalfNormal"</span>, sigma<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co"># straightforward bambi definition</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> bmb.Model(</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"success ~ (1|player_id) + </span><span class="sc">{</span>s<span class="sc">}</span><span class="ss">"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    data<span class="op">=</span>df_model_pd,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    family<span class="op">=</span><span class="st">"bernoulli"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    priors<span class="op">=</span>priors,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># these are default but critical to understand</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    center_predictors<span class="op">=</span><span class="va">True</span>, <span class="co"># better numerical stability</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    noncentered<span class="op">=</span><span class="va">True</span> <span class="co"># non-centered parameterization helps with hard to sample geometries</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>       Formula: success ~ (1|player_id) + bs(distance, df=4, intercept=False)
        Family: bernoulli
          Link: p = logit
  Observations: 8383
        Priors: 
    target = p
        Common-level effects
            Intercept ~ Normal(mu: 0.0, sigma: 1.5)
            bs(distance, df=4, intercept=False) ~ StudentT(nu: 3.0, mu: 0.0, sigma: 1.5)
        
        Group-level effects
            1|player_id ~ StudentT(nu: 3.0, mu: 0.0, sigma: HalfNormal(sigma: 0.5))</code></pre>
</div>
</div>
<p>This model generates player-specific intercepts that adapt based on individual performance and data availability. Players with more observations will have their estimates pulled toward their own performance, while those with limited data will remain closer to the population prior. The shared variance across all players creates partial pooling, where information is borrowed between players to improve estimates for those with limited data.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># spline caused issue with multiprocessing, too much to debug for a weekend</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>idata <span class="op">=</span> model.fit(draws<span class="op">=</span><span class="dv">1000</span>, chains<span class="op">=</span><span class="dv">4</span>, cores<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>az.plot_trace(idata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Modeling the probability that success==1
Initializing NUTS using jitter+adapt_diag...
Sequential sampling (4 chains in 1 job)
NUTS: [Intercept, bs(distance, df=4, intercept=False), 1|player_id_sigma, 1|player_id_offset]
Sampling 4 chains for 1_000 tune and 1_000 draw iterations (4_000 + 4_000 draws total) took 54 seconds.</code></pre>
</div>
<div class="cell-output cell-output-display">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id":"870e3724d9744f76833c10e44b3c0b8c","version_major":2,"version_minor":0,"quarto_mimetype":"application/vnd.jupyter.widget-view+json"}
</script>
</div>
<div class="cell-output cell-output-display">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>array([[&lt;Axes: title={'center': 'Intercept'}&gt;,
        &lt;Axes: title={'center': 'Intercept'}&gt;],
       [&lt;Axes: title={'center': 'bs(distance, df=4, intercept=False)'}&gt;,
        &lt;Axes: title={'center': 'bs(distance, df=4, intercept=False)'}&gt;],
       [&lt;Axes: title={'center': '1|player_id_sigma'}&gt;,
        &lt;Axes: title={'center': '1|player_id_sigma'}&gt;],
       [&lt;Axes: title={'center': '1|player_id'}&gt;,
        &lt;Axes: title={'center': '1|player_id'}&gt;]], dtype=object)</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="bambi_files/figure-html/cell-5-output-5.png" class="img-fluid"></p>
</div>
</div>
<p>It’s important to check diagnostics in Bayesian models. While this doesn’t account for causality or domain-specific modeling checks, it ensures the MCMC algorithm is working as expected. All chains converged without divergent transitions, and effective sample sizes are adequate.</p>
<section id="spline" class="level4">
<h4 class="anchored" data-anchor-id="spline">Spline</h4>
<p>There is evidence to suggest a non-linear relationship between distance and success rate. Using splines, the model estimates this relationship much more realistically than a polynomial model would.</p>
<div class="cell" data-execution_count="5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df_plot <span class="op">=</span> df.group_by(<span class="st">"distance"</span>).agg(pl.col(<span class="st">"success"</span>).<span class="bu">sum</span>() <span class="op">/</span> pl.count(<span class="st">"success"</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>sns.regplot(x<span class="op">=</span><span class="st">"distance"</span>, y<span class="op">=</span><span class="st">"success"</span>, data<span class="op">=</span>df_plot, lowess<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Success Rate by Distance - Observed Data"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Attempt Distance (yards)"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Success Rate"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>Text(0, 0.5, 'Success Rate')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="bambi_files/figure-html/cell-6-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>The table below shows the summary of spline coefficient distributions.</p>
<div class="cell" data-execution_count="6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata, var_names<span class="op">=</span>[<span class="st">"Intercept"</span>, s])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="24">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Intercept</td>
<td>4.292</td>
<td>0.422</td>
<td>3.517</td>
<td>5.116</td>
<td>0.009</td>
<td>0.006</td>
<td>2129.0</td>
<td>2459.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">bs(distance, df=4, intercept=False)[0]</td>
<td>-0.583</td>
<td>0.603</td>
<td>-1.717</td>
<td>0.542</td>
<td>0.013</td>
<td>0.009</td>
<td>2333.0</td>
<td>2477.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">bs(distance, df=4, intercept=False)[1]</td>
<td>-3.822</td>
<td>0.449</td>
<td>-4.664</td>
<td>-3.003</td>
<td>0.008</td>
<td>0.007</td>
<td>3087.0</td>
<td>2859.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">bs(distance, df=4, intercept=False)[2]</td>
<td>-3.429</td>
<td>0.680</td>
<td>-4.712</td>
<td>-2.167</td>
<td>0.015</td>
<td>0.010</td>
<td>2150.0</td>
<td>2680.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">bs(distance, df=4, intercept=False)[3]</td>
<td>-8.036</td>
<td>1.006</td>
<td>-10.070</td>
<td>-6.270</td>
<td>0.017</td>
<td>0.014</td>
<td>3347.0</td>
<td>2985.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Unlike player effect coefficients, they are not as easily interpretable in a table. The plots below are to help understand how they come together. First, we have each basis function and it’s new shape after learning parameter weights.</p>
<div class="cell" data-execution_count="7">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>idata.posterior[s].to_dataframe()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>w <span class="op">=</span> idata.posterior[s].mean((<span class="st">"chain"</span>, <span class="st">"draw"</span>)).values</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>spline_basis <span class="op">=</span> pd.DataFrame(model.components[<span class="st">"p"</span>].design.common[s])</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>df_spline <span class="op">=</span> (spline_basis <span class="op">*</span> w.T).assign(distance <span class="op">=</span> df_model_pd[<span class="st">'distance'</span>]).melt(<span class="st">"distance"</span>, var_name<span class="op">=</span><span class="st">"basis_idx"</span>, value_name<span class="op">=</span><span class="st">"value"</span>).assign(basis_idx <span class="op">=</span> <span class="kw">lambda</span> x: x[<span class="st">'basis_idx'</span>].astype(<span class="bu">str</span>))<span class="co">#.query('distance &gt; 20')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Each bais function with the model estimates.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>sns.lineplot(df_spline, x<span class="op">=</span><span class="st">"distance"</span>, y<span class="op">=</span><span class="st">"value"</span>, hue<span class="op">=</span><span class="st">"basis_idx"</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Basis function's shape"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>Text(0.5, 1.0, "Basis function's shape")</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="bambi_files/figure-html/cell-9-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Summing them together produces the estimated effect of distance on FG success.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>sns.lineplot(df_spline.groupby(<span class="st">"distance"</span>)[<span class="st">"value"</span>].mean())</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"General spline shape"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>Text(0.5, 1.0, 'General spline shape')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="bambi_files/figure-html/cell-10-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>az.summary(idata, var_names<span class="op">=</span><span class="st">'1|player_id'</span>).sort_values(<span class="st">'mean'</span>, ascending<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">sd</th>
<th data-quarto-table-cell-role="th">hdi_3%</th>
<th data-quarto-table-cell-role="th">hdi_97%</th>
<th data-quarto-table-cell-role="th">mcse_mean</th>
<th data-quarto-table-cell-role="th">mcse_sd</th>
<th data-quarto-table-cell-role="th">ess_bulk</th>
<th data-quarto-table-cell-role="th">ess_tail</th>
<th data-quarto-table-cell-role="th">r_hat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1|player_id[39470]</td>
<td>0.453</td>
<td>0.185</td>
<td>0.126</td>
<td>0.813</td>
<td>0.004</td>
<td>0.003</td>
<td>2377.0</td>
<td>2387.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1|player_id[27091]</td>
<td>0.306</td>
<td>0.170</td>
<td>0.008</td>
<td>0.646</td>
<td>0.003</td>
<td>0.003</td>
<td>3349.0</td>
<td>2900.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1|player_id[21213]</td>
<td>0.263</td>
<td>0.155</td>
<td>-0.020</td>
<td>0.551</td>
<td>0.003</td>
<td>0.002</td>
<td>2992.0</td>
<td>2898.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1|player_id[38134]</td>
<td>0.249</td>
<td>0.163</td>
<td>-0.049</td>
<td>0.554</td>
<td>0.002</td>
<td>0.002</td>
<td>4265.0</td>
<td>2975.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1|player_id[30932]</td>
<td>0.247</td>
<td>0.160</td>
<td>-0.040</td>
<td>0.547</td>
<td>0.003</td>
<td>0.003</td>
<td>3758.0</td>
<td>2975.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1|player_id[33337]</td>
<td>-0.186</td>
<td>0.196</td>
<td>-0.565</td>
<td>0.172</td>
<td>0.003</td>
<td>0.003</td>
<td>4806.0</td>
<td>2456.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1|player_id[22744]</td>
<td>-0.196</td>
<td>0.163</td>
<td>-0.513</td>
<td>0.096</td>
<td>0.003</td>
<td>0.003</td>
<td>3745.0</td>
<td>2620.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1|player_id[21093]</td>
<td>-0.201</td>
<td>0.205</td>
<td>-0.572</td>
<td>0.200</td>
<td>0.003</td>
<td>0.003</td>
<td>3843.0</td>
<td>3303.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1|player_id[43348]</td>
<td>-0.207</td>
<td>0.230</td>
<td>-0.640</td>
<td>0.220</td>
<td>0.004</td>
<td>0.004</td>
<td>3863.0</td>
<td>3000.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1|player_id[27760]</td>
<td>-0.215</td>
<td>0.175</td>
<td>-0.556</td>
<td>0.103</td>
<td>0.003</td>
<td>0.003</td>
<td>4486.0</td>
<td>2938.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

<p>86 rows × 9 columns</p>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="field-goals-over-expected" class="level2">
<h2 class="anchored" data-anchor-id="field-goals-over-expected">Field Goals Over Expected</h2>
<section id="regular-fgoe" class="level3">
<h3 class="anchored" data-anchor-id="regular-fgoe">Regular FGOE</h3>
<p>What I outlined in my application was establishing at minimum a Field Goal Over Expected model. This contextualizes each kick and helps identify players over- or underperforming relative to expectation. This metric is used across multiple sports because it’s intuitive and easily digestible, especially for audiences with less analytical training.</p>
<section id="results" class="level4">
<h4 class="anchored" data-anchor-id="results">2018 results</h4>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df_2018 <span class="op">=</span> df_model_pd[df_model_pd[<span class="st">"season"</span>] <span class="op">==</span> <span class="dv">2018</span>]</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>df_goe <span class="op">=</span> model.predict(idata, data<span class="op">=</span>df_2018, inplace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># takes the posterior predictive distributuion and subtracts the</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># predicted probability from the observed kicks</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>idata_fgoe <span class="op">=</span> (</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    df_goe[<span class="st">"posterior"</span>][<span class="st">"p"</span>]</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    .to_dataframe()</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    .merge(df_2018.assign(__obs__<span class="op">=</span><span class="kw">lambda</span> x: np.arange(x.shape[<span class="dv">0</span>])), on<span class="op">=</span><span class="st">"__obs__"</span>)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    .assign(fgoe<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"success"</span>] <span class="op">-</span> x[<span class="st">"p"</span>])[</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>        [<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"fgoe"</span>, <span class="st">"player_name"</span>, <span class="st">"__obs__"</span>]</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"player_name"</span>], observed<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    .agg({<span class="st">"fgoe"</span>: <span class="st">"sum"</span>})</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    .to_xarray()</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>plot_fgoe(idata_fgoe, <span class="st">"Field Goal Over Expected (FGOE) by Player - Blocks Removed"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>&lt;Axes: title={'center': 'Field Goal Over Expected (FGOE) by Player - Blocks Removed'}, xlabel='FGOE'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="bambi_files/figure-html/cell-12-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Justin Tucker is the 20th best kicker? Pitching this model in 2018 would have been difficult, and rightfully so.</p>
<p>The problem with using this metric alone is that limited sample sizes can introduce significant noise. Upon examining the dataset, there was a blocked field goal against Tucker. While outside the scope of this analysis, it’s uncertain how much credit should be assigned to the kicker versus the blocking. When blocked kicks are removed, the model results align more closely with expectations.</p>
</section>
<section id="results---wout-blocks" class="level4">
<h4 class="anchored" data-anchor-id="results---wout-blocks">2018 results - w/out blocks</h4>
<div class="cell" data-execution_count="12">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>idata_fgoe_no_block <span class="op">=</span> (</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    df_goe[<span class="st">"posterior"</span>][<span class="st">"p"</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    .to_dataframe()</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    .merge(</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        df_2018[<span class="op">~</span>df_2018[<span class="st">"field_goal_result"</span>].isin([<span class="st">"Blocked"</span>])].assign(</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>            __obs__<span class="op">=</span><span class="kw">lambda</span> x: np.arange(x.shape[<span class="dv">0</span>])</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span><span class="st">"__obs__"</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    .assign(fgoe<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"success"</span>] <span class="op">-</span> x[<span class="st">"p"</span>])[</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>        [<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"fgoe"</span>, <span class="st">"player_name"</span>, <span class="st">"__obs__"</span>]</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"player_name"</span>], observed<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    .agg({<span class="st">"fgoe"</span>: <span class="st">"sum"</span>})</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    .to_xarray()</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>plot_fgoe(</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    idata_fgoe_no_block, <span class="st">"Field Goal Over Expected (FGOE) by Player - Blocks Removed"</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>&lt;Axes: title={'center': 'Field Goal Over Expected (FGOE) by Player - Blocks Removed'}, xlabel='FGOE'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="bambi_files/figure-html/cell-13-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>However, that approach is arbitrary, and a more robust solution is needed.</p>
<hr>
</section>
<section id="simulated-fgoe" class="level4">
<h4 class="anchored" data-anchor-id="simulated-fgoe">Simulated FGOE</h4>
<p>The chosen model allows us to extract each player’s intercept parameter after accounting for kick distance. This enables what-if scenarios and projections beyond the observed data. By modeling all kickers on the same set of kicks, we can establish expectations for what each kicker should make.</p>
<p>I chose linear intervals for kicks from 25-60 yards. This approach prioritizes simplicity — it’s easy to explain and represents the first step toward gaining organizational buy-in for the model.</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This creates a grid of kicks for the players in 2018</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>df_grid_18 <span class="op">=</span> create_grid(df_model_pd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get posterior predictions without group effects</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>avg_preds <span class="op">=</span> model.predict(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    idata, data<span class="op">=</span>df_grid_18, inplace<span class="op">=</span><span class="va">False</span>, include_group_specific<span class="op">=</span><span class="va">False</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># posterior predictions on grid</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>preds <span class="op">=</span> model.predict(idata, data<span class="op">=</span>df_grid_18, inplace<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>df_pred <span class="op">=</span> preds.posterior[<span class="st">"p"</span>].to_dataframe().reset_index()</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>df_avg_pred <span class="op">=</span> avg_preds[<span class="st">"posterior"</span>][<span class="st">"p"</span>].to_dataframe().reset_index()</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># take the predictions form the players and subtract the posterior predictions without group effects. This provides the main source of the metric for simulated FGOE</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>df_fgoe <span class="op">=</span> (</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    df_pred.merge(df_avg_pred, on<span class="op">=</span>[<span class="st">"chain"</span>, <span class="st">"draw"</span>, <span class="st">"__obs__"</span>], how<span class="op">=</span><span class="st">"inner"</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    .merge(</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>        df_grid_18[[<span class="st">"player_id"</span>, <span class="st">"player_name"</span>, <span class="st">"distance"</span>, <span class="st">"__obs__"</span>]],</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>        on<span class="op">=</span>[<span class="st">"__obs__"</span>],</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>        how<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    .assign(fgoe<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"p_x"</span>] <span class="op">-</span> x[<span class="st">"p_y"</span>])</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="co"># polars makes dataframe go brrr</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>df_output <span class="op">=</span> (</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>    pl.from_pandas(df_fgoe)</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>    .group_by([<span class="st">"player_id"</span>, <span class="st">"player_name"</span>, <span class="st">"draw"</span>, <span class="st">"chain"</span>])</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>    .agg(pl.col(<span class="st">"fgoe"</span>).<span class="bu">sum</span>())</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With the simulation of kicks, we can now look at a <em>Simulated</em> FGOE. This operates at the scale of posterior sample draws, with each player having 4,000 simulations across a distribution of kicks. This approach provides the ability to quantify uncertainty within our estimates and examine the range of potential outcomes.</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>idata_post <span class="op">=</span> df_output.to_pandas().set_index([<span class="st">'chain'</span>, <span class="st">'draw'</span>, <span class="st">'player_name'</span>]).to_xarray()</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>plot_fgoe(idata_post, <span class="st">"Simulated FGOE"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>&lt;Axes: title={'center': 'Simulated FGOE'}, xlabel='FGOE'&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="bambi_files/figure-html/cell-16-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>To compare the regular vs simulated FGOE, we can look at the posterior distributions between the two approachs.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>They aren’t necesarily 1:1 comparisons of the same amount of kicks, because in the regular version we are limited to the kicks that the kicker attempted. What is more important is to look directionally at what the simulated model does compared to the regular. Easily shown is Justin Tucker is firmly at the top of the list, without having to adjust arbitrarily for blocked kicks.</p>
</div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>fgoe_mean <span class="op">=</span> idata_post[<span class="st">"fgoe"</span>].mean((<span class="st">"chain"</span>, <span class="st">"draw"</span>)) <span class="op">*</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>axs <span class="op">=</span> az.plot_forest(</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    [idata_post.sortby(fgoe_mean), idata_fgoe.sortby(fgoe_mean)],</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    var_names<span class="op">=</span>[<span class="st">"fgoe"</span>],</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    model_names<span class="op">=</span>[<span class="st">"Simulated"</span>, <span class="st">"Regular"</span>],</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    combined<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>ax <span class="op">=</span> axs[<span class="dv">0</span>]</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>ax.axvline(x<span class="op">=</span><span class="dv">0</span>, color<span class="op">=</span><span class="st">"black"</span>, linestyle<span class="op">=</span><span class="st">"--"</span>, linewidth<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Comparison"</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"FGOE"</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>ax.tick_params(axis<span class="op">=</span><span class="st">"y"</span>, labelsize<span class="op">=</span><span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="bambi_files/figure-html/cell-17-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Now, even if a kicker hasn’t attempted a 60 yard kick, we can provide an estimate for what that might look like.</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>plot_df <span class="op">=</span> df_fgoe[</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    df_fgoe[<span class="st">"player_name"</span>].isin([<span class="st">"JUSTIN TUCKER"</span>, <span class="st">"ZANE GONZALEZ"</span>])</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>].assign(player_name<span class="op">=</span><span class="kw">lambda</span> x: x[<span class="st">"player_name"</span>].astype(<span class="bu">str</span>))</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>sns.lineplot(plot_df, x<span class="op">=</span><span class="st">"distance"</span>, y<span class="op">=</span><span class="st">"p_x"</span>, hue<span class="op">=</span><span class="st">"player_name"</span>, errorbar<span class="op">=</span>(<span class="st">"pi"</span>, <span class="dv">90</span>))</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Comparison of kicker by distance"</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Attempt Distance (yards)"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"P(Make)"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>Text(0, 0.5, 'P(Make)')</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="bambi_files/figure-html/cell-18-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
</section>
<section id="leaderboard" class="level2">
<h2 class="anchored" data-anchor-id="leaderboard">Leaderboard</h2>
<p>The leaderboard contains:</p>
<div class="cell" data-execution_count="18">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>leaderboard <span class="op">=</span> create_leaderboard(df_output, idata_post)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    GT(</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        pl.concat([leaderboard.head(<span class="dv">10</span>), leaderboard.tail(<span class="dv">10</span>)])</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>        .rename({<span class="st">'hdi_5%'</span>: <span class="st">'lower'</span>, <span class="st">'hdi_95%'</span>: <span class="st">'upper'</span>}))</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    .tab_header(title<span class="op">=</span><span class="st">"2018 NFL Kicker Leaderboard"</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    .tab_spanner(label<span class="op">=</span><span class="st">"Simulated FGOE"</span>, columns<span class="op">=</span>[<span class="st">"rating"</span>, <span class="st">"sd"</span>, <span class="st">"lower"</span>, <span class="st">"upper"</span>])</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#.tab_stubhead(label="rank")</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    .fmt_number(columns<span class="op">=</span>[<span class="st">"rating"</span>, <span class="st">"sd"</span>, <span class="st">"lower"</span>, <span class="st">"upper"</span>], decimals<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    .fmt_percent(<span class="st">"top_5"</span>, decimals<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    .data_color(</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>[<span class="st">"rating"</span>],</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>        domain<span class="op">=</span>[leaderboard[<span class="st">"rating"</span>].<span class="bu">min</span>(), leaderboard[<span class="st">"rating"</span>].<span class="bu">max</span>()],</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>        palette<span class="op">=</span>[<span class="st">"rebeccapurple"</span>, <span class="st">"white"</span>, <span class="st">"orange"</span>],</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        na_color<span class="op">=</span><span class="st">"white"</span>,</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    .data_color(</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>[<span class="st">"lower"</span>],</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>        domain<span class="op">=</span>[leaderboard[<span class="st">"hdi_5%"</span>].<span class="bu">min</span>(), leaderboard[<span class="st">"hdi_5%"</span>].<span class="bu">max</span>()],</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>        palette<span class="op">=</span>[<span class="st">"rebeccapurple"</span>, <span class="st">"white"</span>, <span class="st">"orange"</span>],</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>        na_color<span class="op">=</span><span class="st">"white"</span>,</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>    .data_color(</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span>[<span class="st">"upper"</span>],</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>        domain<span class="op">=</span>[leaderboard[<span class="st">"hdi_95%"</span>].<span class="bu">min</span>(), leaderboard[<span class="st">"hdi_95%"</span>].<span class="bu">max</span>()],</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>        palette<span class="op">=</span>[<span class="st">"rebeccapurple"</span>, <span class="st">"white"</span>, <span class="st">"orange"</span>],</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>        na_color<span class="op">=</span><span class="st">"white"</span>,</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>    .cols_label(</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>        player_id<span class="op">=</span>html(<span class="st">"Player Id"</span>),</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>        player_name<span class="op">=</span>html(<span class="st">"Player Name"</span>),</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>        rank <span class="op">=</span> <span class="st">"Rank"</span>,</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>        rating <span class="op">=</span> <span class="st">'Rating'</span>,</span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>        sd <span class="op">=</span> <span class="st">'Variance'</span>,</span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>        lower <span class="op">=</span> <span class="st">'Low-end'</span>,</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>        upper <span class="op">=</span> <span class="st">'High-end'</span>,</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>        top_5 <span class="op">=</span> <span class="st">'Top 5'</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="36">

<div id="nzzeuujxig" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>
#nzzeuujxig table {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

#nzzeuujxig thead, tbody, tfoot, tr, td, th { border-style: none; }
 tr { background-color: transparent; }
#nzzeuujxig p { margin: 0; padding: 0; }
 #nzzeuujxig .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }
 #nzzeuujxig .gt_caption { padding-top: 4px; padding-bottom: 4px; }
 #nzzeuujxig .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }
 #nzzeuujxig .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }
 #nzzeuujxig .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #nzzeuujxig .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #nzzeuujxig .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }
 #nzzeuujxig .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }
 #nzzeuujxig .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }
 #nzzeuujxig .gt_column_spanner_outer:first-child { padding-left: 0; }
 #nzzeuujxig .gt_column_spanner_outer:last-child { padding-right: 0; }
 #nzzeuujxig .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }
 #nzzeuujxig .gt_spanner_row { border-bottom-style: hidden; }
 #nzzeuujxig .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }
 #nzzeuujxig .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }
 #nzzeuujxig .gt_from_md> :first-child { margin-top: 0; }
 #nzzeuujxig .gt_from_md> :last-child { margin-bottom: 0; }
 #nzzeuujxig .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }
 #nzzeuujxig .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }
 #nzzeuujxig .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }
 #nzzeuujxig .gt_row_group_first td { border-top-width: 2px; }
 #nzzeuujxig .gt_row_group_first th { border-top-width: 2px; }
 #nzzeuujxig .gt_striped { background-color: rgba(128,128,128,0.05); }
 #nzzeuujxig .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }
 #nzzeuujxig .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }
 #nzzeuujxig .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }
 #nzzeuujxig .gt_left { text-align: left; }
 #nzzeuujxig .gt_center { text-align: center; }
 #nzzeuujxig .gt_right { text-align: right; font-variant-numeric: tabular-nums; }
 #nzzeuujxig .gt_font_normal { font-weight: normal; }
 #nzzeuujxig .gt_font_bold { font-weight: bold; }
 #nzzeuujxig .gt_font_italic { font-style: italic; }
 #nzzeuujxig .gt_super { font-size: 65%; }
 #nzzeuujxig .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }
 #nzzeuujxig .gt_asterisk { font-size: 100%; vertical-align: 0; }
 
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>

  <tr class="gt_heading">
    <td colspan="8" class="gt_heading gt_title gt_font_normal">2018 NFL Kicker Leaderboard</td>
  </tr>
<tr class="gt_col_headings gt_spanner_row">
  <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1" scope="col" id="player_id">Player Id</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col" id="player_name">Player Name</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="rank">Rank</th>
  <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup" id="Simulated-FGOE">
    <span class="gt_column_spanner">Simulated FGOE</span>
  </th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="2" colspan="1" scope="col" id="top_5">Top 5</th>
</tr>
<tr class="gt_col_headings">
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="rating">Rating</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="sd">Variance</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="lower">Low-end</th>
  <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="upper">High-end</th>
</tr>
</thead>
<tbody class="gt_table_body">
  <tr>
    <td class="gt_row gt_center">39470</td>
    <td class="gt_row gt_left">JUSTIN TUCKER</td>
    <td class="gt_row gt_right">1</td>
    <td style="color: #000000; background-color: #ffa500;" class="gt_row gt_right">2.23</td>
    <td class="gt_row gt_right">0.84</td>
    <td style="color: #000000; background-color: #ffa500;" class="gt_row gt_right">0.83</td>
    <td style="color: #000000; background-color: #ffa500;" class="gt_row gt_right">3.60</td>
    <td class="gt_row gt_right">82.5%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">27091</td>
    <td class="gt_row gt_left">MATT BRYANT</td>
    <td class="gt_row gt_right">2</td>
    <td style="color: #000000; background-color: #ffcc6f;" class="gt_row gt_right">1.55</td>
    <td class="gt_row gt_right">0.82</td>
    <td style="color: #000000; background-color: #ffc253;" class="gt_row gt_right">0.22</td>
    <td style="color: #000000; background-color: #ffce74;" class="gt_row gt_right">2.93</td>
    <td class="gt_row gt_right">48.6%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">21213</td>
    <td class="gt_row gt_left">ADAM VINATIERI</td>
    <td class="gt_row gt_right">3</td>
    <td style="color: #000000; background-color: #ffd891;" class="gt_row gt_right">1.35</td>
    <td class="gt_row gt_right">0.77</td>
    <td style="color: #000000; background-color: #ffcb6d;" class="gt_row gt_right">0.03</td>
    <td style="color: #000000; background-color: #ffe7ba;" class="gt_row gt_right">2.53</td>
    <td class="gt_row gt_right">37.5%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">38134</td>
    <td class="gt_row gt_left">DAN BAILEY</td>
    <td class="gt_row gt_right">4</td>
    <td style="color: #000000; background-color: #ffdc9c;" class="gt_row gt_right">1.28</td>
    <td class="gt_row gt_right">0.81</td>
    <td style="color: #000000; background-color: #ffce74;" class="gt_row gt_right">−0.02</td>
    <td style="color: #000000; background-color: #ffe3af;" class="gt_row gt_right">2.59</td>
    <td class="gt_row gt_right">32.9%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">30932</td>
    <td class="gt_row gt_left">STEPHEN GOSTKOWSKI</td>
    <td class="gt_row gt_right">5</td>
    <td style="color: #000000; background-color: #ffdd9e;" class="gt_row gt_right">1.26</td>
    <td class="gt_row gt_right">0.79</td>
    <td style="color: #000000; background-color: #ffcc6e;" class="gt_row gt_right">0.02</td>
    <td style="color: #000000; background-color: #ffe2ac;" class="gt_row gt_right">2.60</td>
    <td class="gt_row gt_right">33.1%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">33469</td>
    <td class="gt_row gt_left">STEVEN HAUSCHKA</td>
    <td class="gt_row gt_right">6</td>
    <td style="color: #000000; background-color: #ffdea3;" class="gt_row gt_right">1.24</td>
    <td class="gt_row gt_right">0.78</td>
    <td style="color: #000000; background-color: #ffcc6e;" class="gt_row gt_right">0.02</td>
    <td style="color: #000000; background-color: #ffe4b2;" class="gt_row gt_right">2.58</td>
    <td class="gt_row gt_right">30.4%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">30403</td>
    <td class="gt_row gt_left">ROBBIE GOULD</td>
    <td class="gt_row gt_right">7</td>
    <td style="color: #000000; background-color: #ffe9c0;" class="gt_row gt_right">1.06</td>
    <td class="gt_row gt_right">0.82</td>
    <td style="color: #000000; background-color: #ffd891;" class="gt_row gt_right">−0.23</td>
    <td style="color: #000000; background-color: #ffecca;" class="gt_row gt_right">2.43</td>
    <td class="gt_row gt_right">23.7%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">31446</td>
    <td class="gt_row gt_left">MATT PRATER</td>
    <td class="gt_row gt_right">8</td>
    <td style="color: #000000; background-color: #ffeecf;" class="gt_row gt_right">0.97</td>
    <td class="gt_row gt_right">0.79</td>
    <td style="color: #000000; background-color: #ffda98;" class="gt_row gt_right">−0.28</td>
    <td style="color: #000000; background-color: #fff4e1;" class="gt_row gt_right">2.30</td>
    <td class="gt_row gt_right">19.7%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">45046</td>
    <td class="gt_row gt_left">HARRISON BUTKER</td>
    <td class="gt_row gt_right">9</td>
    <td style="color: #000000; background-color: #fff8ea;" class="gt_row gt_right">0.80</td>
    <td class="gt_row gt_right">1.08</td>
    <td style="color: #000000; background-color: #faf8fb;" class="gt_row gt_right">−1.11</td>
    <td style="color: #000000; background-color: #ffebc5;" class="gt_row gt_right">2.46</td>
    <td class="gt_row gt_right">21.0%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">38701</td>
    <td class="gt_row gt_left">GREG ZUERLEIN</td>
    <td class="gt_row gt_right">10</td>
    <td style="color: #000000; background-color: #fdfcfe;" class="gt_row gt_right">0.65</td>
    <td class="gt_row gt_right">0.83</td>
    <td style="color: #000000; background-color: #ffedcc;" class="gt_row gt_right">−0.67</td>
    <td style="color: #000000; background-color: #fbfafc;" class="gt_row gt_right">2.09</td>
    <td class="gt_row gt_right">11.8%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">35102</td>
    <td class="gt_row gt_left">GRAHAM GANO</td>
    <td class="gt_row gt_right">30</td>
    <td style="color: #000000; background-color: #a283c1;" class="gt_row gt_right">−0.28</td>
    <td class="gt_row gt_right">0.78</td>
    <td style="color: #000000; background-color: #d3c4e1;" class="gt_row gt_right">−1.58</td>
    <td style="color: #FFFFFF; background-color: #835aad;" class="gt_row gt_right">0.94</td>
    <td class="gt_row gt_right">0.5%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">38691</td>
    <td class="gt_row gt_left">RANDY BULLOCK</td>
    <td class="gt_row gt_right">31</td>
    <td style="color: #000000; background-color: #9b7abc;" class="gt_row gt_right">−0.35</td>
    <td class="gt_row gt_right">0.94</td>
    <td style="color: #000000; background-color: #b096cb;" class="gt_row gt_right">−2.00</td>
    <td style="color: #000000; background-color: #8f6ab5;" class="gt_row gt_right">1.06</td>
    <td class="gt_row gt_right">1.5%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">29874</td>
    <td class="gt_row gt_left">MIKE NUGENT</td>
    <td class="gt_row gt_right">32</td>
    <td style="color: #000000; background-color: #9674b9;" class="gt_row gt_right">−0.40</td>
    <td class="gt_row gt_right">0.85</td>
    <td style="color: #000000; background-color: #c3afd7;" class="gt_row gt_right">−1.77</td>
    <td style="color: #000000; background-color: #8e68b3;" class="gt_row gt_right">1.04</td>
    <td class="gt_row gt_right">0.9%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">43937</td>
    <td class="gt_row gt_left">ALDRICK ROSAS</td>
    <td class="gt_row gt_right">33</td>
    <td style="color: #FFFFFF; background-color: #8961b0;" class="gt_row gt_right">−0.54</td>
    <td class="gt_row gt_right">1.17</td>
    <td style="color: #FFFFFF; background-color: #865dae;" class="gt_row gt_right">−2.52</td>
    <td style="color: #000000; background-color: #a587c3;" class="gt_row gt_right">1.27</td>
    <td class="gt_row gt_right">2.2%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">40114</td>
    <td class="gt_row gt_left">CALEB STURGIS</td>
    <td class="gt_row gt_right">34</td>
    <td style="color: #FFFFFF; background-color: #835aad;" class="gt_row gt_right">−0.59</td>
    <td class="gt_row gt_right">0.94</td>
    <td style="color: #000000; background-color: #9d7cbd;" class="gt_row gt_right">−2.24</td>
    <td style="color: #FFFFFF; background-color: #794ca6;" class="gt_row gt_right">0.84</td>
    <td class="gt_row gt_right">0.9%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">32386</td>
    <td class="gt_row gt_left">MASON CROSBY</td>
    <td class="gt_row gt_right">35</td>
    <td style="color: #FFFFFF; background-color: #8359ac;" class="gt_row gt_right">−0.60</td>
    <td class="gt_row gt_right">0.80</td>
    <td style="color: #000000; background-color: #b49acd;" class="gt_row gt_right">−1.96</td>
    <td style="color: #FFFFFF; background-color: #663399;" class="gt_row gt_right">0.66</td>
    <td class="gt_row gt_right">0.3%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">46236</td>
    <td class="gt_row gt_left">DANIEL CARLSON</td>
    <td class="gt_row gt_right">36</td>
    <td style="color: #FFFFFF; background-color: #7f54a9;" class="gt_row gt_right">−0.64</td>
    <td class="gt_row gt_right">1.37</td>
    <td style="color: #FFFFFF; background-color: #6b399c;" class="gt_row gt_right">−2.85</td>
    <td style="color: #000000; background-color: #bfa9d4;" class="gt_row gt_right">1.51</td>
    <td class="gt_row gt_right">3.6%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">46663</td>
    <td class="gt_row gt_left">MATTHEW MCCRANE</td>
    <td class="gt_row gt_right">37</td>
    <td style="color: #FFFFFF; background-color: #7b4fa7;" class="gt_row gt_right">−0.67</td>
    <td class="gt_row gt_right">1.34</td>
    <td style="color: #FFFFFF; background-color: #6f3f9f;" class="gt_row gt_right">−2.80</td>
    <td style="color: #000000; background-color: #c3afd7;" class="gt_row gt_right">1.55</td>
    <td class="gt_row gt_right">3.2%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">44240</td>
    <td class="gt_row gt_left">SAM FICKEN</td>
    <td class="gt_row gt_right">38</td>
    <td style="color: #FFFFFF; background-color: #7142a0;" class="gt_row gt_right">−0.78</td>
    <td class="gt_row gt_right">1.38</td>
    <td style="color: #FFFFFF; background-color: #69379b;" class="gt_row gt_right">−2.87</td>
    <td style="color: #000000; background-color: #b096cb;" class="gt_row gt_right">1.37</td>
    <td class="gt_row gt_right">2.3%</td>
  </tr>
  <tr>
    <td class="gt_row gt_center">45037</td>
    <td class="gt_row gt_left">ZANE GONZALEZ</td>
    <td class="gt_row gt_right">39</td>
    <td style="color: #FFFFFF; background-color: #663399;" class="gt_row gt_right">−0.89</td>
    <td class="gt_row gt_right">1.24</td>
    <td style="color: #FFFFFF; background-color: #663399;" class="gt_row gt_right">−2.91</td>
    <td style="color: #000000; background-color: #936fb7;" class="gt_row gt_right">1.09</td>
    <td class="gt_row gt_right">1.5%</td>
  </tr>
</tbody>


</table>

</div>
        
</div>
</div>
</section>

</main>
<!-- /main column -->
<script type="application/vnd.jupyter.widget-state+json">
{"state":{"4bc49419dc784e7a954ea58c50208c50":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_9e17f85e5c6a43d79d19378a3655fc51","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">                                                                                                                   \n <span style=\"font-weight: bold\"> Progress                  </span> <span style=\"font-weight: bold\"> Draws </span> <span style=\"font-weight: bold\"> Divergences </span> <span style=\"font-weight: bold\"> Step size </span> <span style=\"font-weight: bold\"> Grad evals </span> <span style=\"font-weight: bold\"> Sampling Speed </span> <span style=\"font-weight: bold\"> Elapsed </span> <span style=\"font-weight: bold\"> Remaining </span> \n ───────────────────────────────────────────────────────────────────────────────────────────────────────────────── \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   2000    0             0.29        15           173.43 draws/s   0:00:11   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   2000    0             0.33        31           86.44 draws/s    0:00:23   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   2000    0             0.27        15           55.43 draws/s    0:00:36   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   2000    0             0.20        15           42.13 draws/s    0:00:47   0:00:00    \n                                                                                                                   \n</pre>\n","text/plain":"                                                                                                                   \n \u001b[1m \u001b[0m\u001b[1mProgress                 \u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mDraws\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mDivergences\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mStep size\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mGrad evals\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mSampling Speed\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mElapsed\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mRemaining\u001b[0m\u001b[1m \u001b[0m \n ───────────────────────────────────────────────────────────────────────────────────────────────────────────────── \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   2000    0             0.29        15           173.43 draws/s   0:00:11   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   2000    0             0.33        31           86.44 draws/s    0:00:23   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   2000    0             0.27        15           55.43 draws/s    0:00:36   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   2000    0             0.20        15           42.13 draws/s    0:00:47   0:00:00    \n                                                                                                                   \n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"870e3724d9744f76833c10e44b3c0b8c":{"model_module":"@jupyter-widgets/output","model_module_version":"1.0.0","model_name":"OutputModel","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/output","_model_module_version":"1.0.0","_model_name":"OutputModel","_view_count":null,"_view_module":"@jupyter-widgets/output","_view_module_version":"1.0.0","_view_name":"OutputView","layout":"IPY_MODEL_c1552b39624541c790283d765085188f","msg_id":"","outputs":[{"data":{"text/html":"<pre style=\"white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace\">                                                                                                                   \n <span style=\"font-weight: bold\"> Progress                  </span> <span style=\"font-weight: bold\"> Draws </span> <span style=\"font-weight: bold\"> Divergences </span> <span style=\"font-weight: bold\"> Step size </span> <span style=\"font-weight: bold\"> Grad evals </span> <span style=\"font-weight: bold\"> Sampling Speed </span> <span style=\"font-weight: bold\"> Elapsed </span> <span style=\"font-weight: bold\"> Remaining </span> \n ───────────────────────────────────────────────────────────────────────────────────────────────────────────────── \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   2000    0             0.28        15           144.44 draws/s   0:00:13   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   2000    0             0.22        15           73.37 draws/s    0:00:27   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   2000    0             0.23        15           49.26 draws/s    0:00:40   0:00:00    \n  <span style=\"color: #1f77b4; text-decoration-color: #1f77b4\">━━━━━━━━━━━━━━━━━━━━━━━━━</span>   2000    0             0.26        15           36.69 draws/s    0:00:54   0:00:00    \n                                                                                                                   \n</pre>\n","text/plain":"                                                                                                                   \n \u001b[1m \u001b[0m\u001b[1mProgress                 \u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mDraws\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mDivergences\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mStep size\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mGrad evals\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mSampling Speed\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mElapsed\u001b[0m\u001b[1m \u001b[0m \u001b[1m \u001b[0m\u001b[1mRemaining\u001b[0m\u001b[1m \u001b[0m \n ───────────────────────────────────────────────────────────────────────────────────────────────────────────────── \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   2000    0             0.28        15           144.44 draws/s   0:00:13   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   2000    0             0.22        15           73.37 draws/s    0:00:27   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   2000    0             0.23        15           49.26 draws/s    0:00:40   0:00:00    \n  \u001b[38;2;31;119;180m━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m   2000    0             0.26        15           36.69 draws/s    0:00:54   0:00:00    \n                                                                                                                   \n"},"metadata":{},"output_type":"display_data"}],"tabbable":null,"tooltip":null}},"9e17f85e5c6a43d79d19378a3655fc51":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"c1552b39624541c790283d765085188f":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}}},"version_major":2,"version_minor":0}
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>